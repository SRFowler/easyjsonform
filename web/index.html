<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EasyJsonForm</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Meow+Script&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style> .custom-class {
        background-color: yellowgreen;
    }
    </style>
</head>
<body>
    <main class="container my-4">
        <h1 class="text-center display-1">
            <span class="badge rounded-pill bg-primary">easy<br/>json<br/>form</span>
        </h1>
        <h2 class="text-center">
            <span class="text-muted">When you just need a <span style="font-family: 'Meow Script', cursive; font-size:3.5rem; font-weight: '800';">form</span>, not a &lt;form&gt;</span>
        </h2>

        <p class="lead">
            EasyJsonForm is a javascript form building library. Forms can be visually created and are internally represented as json objects. Form data are also represented as json objects.
        </p>

        <h2>Give it a try!</h2>
        <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="builder-tab" data-bs-toggle="tab" data-bs-target="#builder" type="button" role="tab" aria-controls="builder" aria-selected="true">Builder</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="form-tab" data-bs-toggle="tab" data-bs-target="#form" type="button" role="tab" aria-controls="form" aria-selected="false">Form</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="json-tab" data-bs-toggle="tab" data-bs-target="#json" type="button" role="tab" aria-controls="json" aria-selected="false">Json object</button>
            </li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane fade show active" id="builder" role="tabpanel" aria-labelledby="builder-tab"></div>
            <div class="tab-pane fade" id="form" role="tabpanel" aria-labelledby="form-tab"></div>
            <div class="tab-pane fade" id="json" role="tabpanel" aria-labelledby="json-tab"><pre><code id="jsonData"></code></pre></div>
          </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="../easyjsonform.js"></script>
    <!-- <script src="../lang/pt_BR.js"></script> -->
    <script>
        
        /*
        EasyJsonForm.dictionary = ejf_pt_BR; 
        */
        let xsampleEasyJsonFormStructure = [
            {"type":"textgroup","label":"Autor 1","customattribute":"noreview","mandatory":true,"spec":{"items":["Nome","Instituição","E-mail"]}},{"type":"textgroup","label":"Autor 2","customattribute":"noreview","mandatory":false,"spec":{"items":["Nome","Instituição","E-mail"]}},{"type":"textgroup","label":"Autor 3","customattribute":"noreview","mandatory":false,"spec":{"items":["Nome","Instituição","E-mail"]}},{"type":"textgroup","label":"Autor 4","customattribute":"noreview","mandatory":false,"spec":{"items":["Nome","Instituição","E-mail"]}},{"type":"textgroup","label":"Autor 5","customattribute":"noreview","mandatory":false,"spec":{"items":["Nome","Instituição","E-mail"]}},{"type":"singlechoice","label":"Quem irá apresentar","customattribute":"noreview","mandatory":true,"spec":{"items":["Autor 1","Autor 2","Autor 3","Autor 4","Autor 5"]}},{"type":"text","label":"Título","customattribute":"","mandatory":true,"spec":null},{"type":"text","label":"Palavras-chave","customattribute":"","mandatory":true,"spec":null},{"type":"singlechoice","label":"Sub-área","customattribute":"","mandatory":true,"spec":{"items":["A - Gestão de Eventos Esportivos","B - Gestão de Instalações Esportivas","C - Formação Profissional na Gestão do Esporte","D - Ensino da Gestão do Esporte","E - Gestão de Recursos Humanos","F - Legislação e Ética","G - Marketing Esportivo","H - Mídia e Comunicação do Esporte","I - Políticas Públicas de Esporte","J - Estratégia, Governança e Responsabilidade Social Corporativa","K - Economia e Finanças na Gestão do Esporte","L - Métodos de Pesquisa em Gestão do Esporte","M - Outros temas ligados à Gestão do Esporte"]}},{"type":"singlechoice","label":"Tipo de apresentação","customattribute":"","mandatory":true,"spec":{"items":["Pôster","Comunicação Oral","Pitch"]}},{"type":"bigtext","label":"Resumo","customattribute":"","mandatory":true,"spec":{"min_words":"600","max_words":"900"}},{"type":"bigtext","label":"Referências Bibliográficas","customattribute":"","mandatory":false,"spec":{"min_words":"0","max_words":"0"}}
        ];
        let sampleEasyJsonFormStructure = 
        [
            {"type":"text","label":"This is a character restricted text field","customattribute":"Custom attribute for character restricted text","mandatory":true,"spec":{"length":{"measure":"bycharacter","min":2,"max":100}},"value":"Test value for character restricted text area"},
            {"type":"text","label":"This is a word restricted text field","customattribute":"Custom attribute word restricted for text","mandatory":true,"spec":{"length":{"measure":"byword","min":2,"max":100}},"value":"Test value for word restricted text area"},
            {"type":"text","label":"This is an unrestricted text field","customattribute":"Custom attribute for unrestricted text","mandatory":true,"spec":{"length":{"measure":"no","min":2,"max":100}},"value":"Test value for unrestricted text area"},
            {"type":"textgroup","label":"This is a text group field","customattribute":"Custom attribute for text group","mandatory":true,"spec":{"items":["a","b","c"]},"value":['å','∫','ç']},
            {"type":"number","label":"This is a number field","customattribute":"Custom attribute for number","mandatory":true,"spec":null,"value":null},
            {"type":"singlechoice","label":"This is a single choice field","customattribute":"Custom attribute for single choice","mandatory":true,"spec":{"items":["m","n","o"]},"value":"1"},
            {"type":"multiplechoice","label":"This is a multiple choice field","customattribute":"Custom attribute for multiple choice","mandatory":true,"spec":{"items":["x","y","z"]},"value":["0","1","0"]},
            {"type":"file","label":"This is a file field","customattribute":"Custom attribute for file","mandatory":true,"spec":{"file_types":["application/pdf","image/jpeg","image/bmp","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint"],"max_size":42},"value":null},
            {"type":"file","label":"This is another file field","customattribute":"Custom attribute for another file","mandatory":true,"spec":{"file_types":["image/bmp","image/gif"],"max_size":42},"value":'somefile'},
        ];
        let sampleEasyJsonForm;
        // Listing all possible areas that can be styled by applying css classes (using classList) 
        // or using css properties directy (using style). They are all shown just for reference. 
        // In a real-world application, empty entries don't need to be declared.
        let sampleEasyJsonFormStyle = {
            Builder: { 
                classList: [],
                style: {},
            },
            BuilderTable: {
                classList: ['table'],
                style: {},
            },
            BuilderToolbar: { 
                classList: ['btn-group', 'mx-auto'],
                style: {},
            },
            BuilderToolbarButton: { 
                classList: ['btn', 'btn-outline-primary', 'btn-sm'],
                style: {},
            },
            BuilderFieldTooldbar: {
                classList: ['btn-group','w-100'],
                style: {},
            },
            BuilderFieldTooldbarButton: {
                classList: ['btn','btn-outline-primary', 'p-2'],
                style: {},
            },
            BuilderFieldTooldbarDeleteButton: {
                classList: ['btn','btn-outline-danger', 'p-2'],
                style: {},
            },
            Form: { 
                classList: [],
                style: {},
            },
            FieldFile: {
                classList: ['my-3'],
                style: {},
            },
            FieldFileLabel: {
                classList: ['form-label'],
                style: {},
            },
            FieldFileInput: {
                classList: ['form-control'],
                style: {},
            },
            FieldFileValue: {
                classList: ['d-flex', 'flex-nowrap', 'btn-group'],
                style: {},
            },
            FieldFileLink: {
                classList: ['btn', 'btn-outline-primary', 'flex-grow-1', 'text-start'],
                style: {},
            },
            FieldFileClear: {
                classList: ['btn', 'btn-outline-danger', 'flex-grow-0'],
                style: {},
            },
            FieldMultiplechoice: {
                classList: ['my-3'],
                style: {},
            },
            FieldMultiplechoiceLabel: {
                classList: ['form-label'],
                style: {},
            },
            FieldMultiplechoiceGroup: {
                classList: ['d-flex','justify-content-start','align-items-start'],
                style: {},
            },
            FieldMultiplechoiceItem: {
                classList: ['form-check', 'flex-grow-1'],
                style: {},
            },
            FieldMultiplechoiceItemLabel: {
                classList: ['form-check-label'],
                style: {},
            },
            FieldMultiplechoiceItemInput: {
                classList: ['form-check-input'],
                style: {},
            },
            FieldSinglechoice: {
                classList: ['my-3'],
                style: {},
            },
            FieldSinglechoiceLabel: {
                classList: ['form-label'],
                style: {},
            },
            FieldSinglechoiceSelect: {
                classList: ['form-select'],
                style: {},
            },
            FieldNumber: {
                classList: ['my-3'],
                style: {},
            },
            FieldNumberLabel: {
                classList: ['form-label'],
                style: {},
            },
            FieldNumberInput: {
                classList: ['form-control'],
                style: {},
            },
            FieldText: {
                classList: ['my-3'],
                style: {},
            },
            FieldTextLabel: {
                classList: ['form-label'],
                style: {},
            },
            FieldTextInfo: {
                classList: ['form-text','float-end'],
                style: {},
            },
            fieldTextInput: {
                classList: ['form-control'],
                style: {},
            },
            FieldTextgroup: {
                classList: ['my-3'],
                style: {},
            },
            FieldTextgroupLabel: {
                classList: ['form-label'],
                style: {},
            },
            FieldTextgroupGroup: {
                classList: ['d-flex','flex-nowrap','justify-content-between','align-items-stretch'],
                style: {},
            },
            FieldTextgroupItem: {
                classList: ['input-group','d-inline-flex'],
                style: {},
            },
            FieldTextgroupItemLabel: {
                classList: ['input-group-text'],
                style: {},
            },
            FieldTextgroupItemInput: {
                classList: ['form-control'],
                style: {},
            },
            ValidationErrorLabel: {
                classList: [],
                style: {}
            },
            ValidationErrorInput: {
                classList: ['is-invalid'],
                style: {}
            },
            ValidationErrorMessage: {
                classList: ['invalid-feedback'],
                style: {},
            },
        };
        let sampleEasyJsonFormOptions = {
            // 'disabled' makes form and structure read-only when set true. Default is false.
            disabled: false,
            // 'fileHandler' contains the set of functions needed to deal with files that are
            // uploaded with EasyJsonForm. The files in EasyJsonForm are uploaded assynchronously and, on success,
            // a text value is returned. With this text value 2 more methods are necessary: One
            // that converts that name into a display name an the other that convert that name 
            // into a http link to be clicked by the user. If fileHandler is not supported, the
            // file operations will return errors
            fileHandler: {
                // Returns a string with the name to be displayed
                displayName: (value) => EasyJsonForm.dictionary['item.file.vaule.uploaded.file'],
                // Returns a Promise (fetch can be used!) which will resolve as an object with keys 
                // 'success' (boolean) and 'value' (string: value to be stored or error message)
                upload: (file) => {
                    return new Promise((resolve, reject) => {
                        console.log(file);
                        setTimeout(()=>resolve({success: true, value: 'sampleFileName'}), 3000);
                    });
                },
                // Returns the url for the link to be displayed
                url: (value) => 'https://google.com',
            },
            // 'onStructureChange' can receive a callback function which is invoked whenever there
            // is a change on the structure of the form caused by the builder
            onStructureChange: () => {
                sampleEasyJsonForm.formUpdate();
                document.querySelector('#jsonData').textContent = JSON.stringify(sampleEasyJsonForm.structureExport(), null, 4);
            },
        };
        sampleEasyJsonForm = new EasyJsonForm('sample', [], sampleEasyJsonFormStyle, sampleEasyJsonFormOptions);
        document.querySelector('#builder').appendChild(sampleEasyJsonForm.builderGet());
        document.querySelector('#form').appendChild(sampleEasyJsonForm.formGet());
        let btnValidateForm = document.createElement('button');
        btnValidateForm.classList.add('btn', 'btn-sm', 'btn-outline-primary');
        btnValidateForm.textContent = "Validate Form";
        btnValidateForm.onclick = () => sampleEasyJsonForm.formUpdate(true);
        document.querySelector('#form').appendChild(btnValidateForm);
    </script>
    
</body>
</html>